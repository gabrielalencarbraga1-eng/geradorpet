<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuaPetição - Gerador de Petições com IA</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary-green-dark: #004d40;
            --primary-green-medium: #26a69a;
            --primary-green-light: #e0f2f1;
            --neutral-dark: #212121;
            --neutral-medium: #616161;
            --neutral-light: #f5f5f5;
            --background-color: #ffffff;
            --error-color: #d32f2f;
            --error-background: #ffebee;
        }
        *{margin:0;padding:0;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
        html{scroll-behavior:smooth}
        body{font-family:'Poppins',sans-serif;background-color:var(--background-color);color:var(--neutral-dark);font-size:16px;line-height:1.6}
        .container{max-width:1100px;margin:0 auto;padding:0 20px}
        header{background-color:var(--background-color);padding:1rem 0;border-bottom:1px solid #e0e0e0;position:fixed;top:0;left:0;width:100%;z-index:1000;transition:box-shadow .3s ease}
        header.scrolled{box-shadow:0 2px 10px rgba(0,0,0,.05)}
        .header-content{display:flex;justify-content:space-between;align-items:center}
        .logo{font-size:1.5rem;font-weight:700;color:var(--primary-green-dark);text-decoration:none}
        .logo span{color:var(--primary-green-medium)}
        nav ul{display:flex;align-items:center;list-style:none;gap:1.5rem}
        nav a:not(.btn){text-decoration:none;color:var(--neutral-medium);font-weight:500;position:relative;transition:color .3s ease;padding:.5rem 0}
        nav a:not(.btn):hover{color:var(--primary-green-dark)}
        nav a:not(.btn)::after{content:'';position:absolute;width:0;height:2px;bottom:0;left:0;background-color:var(--primary-green-medium);transition:width .3s ease}
        nav a:not(.btn):hover::after{width:100%}
        .hamburger{display:none;cursor:pointer;border:none;background:none}
        .hamburger .bar{display:block;width:25px;height:3px;margin:5px auto;background-color:var(--primary-green-dark);transition:all .3s ease-in-out}
        .btn{padding:.75rem 1.5rem;border-radius:50px;text-decoration:none;font-weight:600;transition:all .3s ease;display:inline-block;text-align:center;border:none;cursor:pointer}
        .btn-primary{background-color:var(--primary-green-medium);color:white;box-shadow:0 4px 15px rgba(38,166,154,.2)}
        .btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(38,166,154,.3)}
        .btn-secondary{border:2px solid var(--primary-green-medium);color:var(--primary-green-medium);background-color:transparent}
        .btn-secondary:hover{background-color:var(--primary-green-medium);color:white}
        section{padding:6rem 0}
        .section-title{text-align:center;font-size:2.5rem;font-weight:700;color:var(--primary-green-dark);margin-bottom:1rem}
        .section-subtitle{text-align:center;font-size:1.1rem;color:var(--neutral-medium);max-width:600px;margin:0 auto 4rem auto}
        #hero{padding-top:10rem;min-height:100vh;display:flex;align-items:center}
        .hero-content{display:flex;align-items:center;justify-content:space-between;gap:4rem}
        .hero-text{max-width:50%}
        .hero-text h1{font-size:3rem;font-weight:700;line-height:1.2;color:var(--primary-green-dark);margin-bottom:1rem}
        .hero-text p{font-size:1.2rem;color:var(--neutral-medium);margin-bottom:2rem}
        .hero-image{max-width:45%; text-align: center;}
        .hero-image svg{width: 100%; max-width: 450px; height: auto;}
        #how-it-works{background-color:var(--neutral-light)}
        .steps-container{display:flex;justify-content:space-around;gap:2rem;margin-top:4rem}
        .step-card{background-color:white;padding:2.5rem 2rem;border-radius:10px;text-align:center;box-shadow:0 5px 25px rgba(0,0,0,.05);transition:transform .3s ease,box-shadow .3s ease;flex:1}
        .step-card:hover{transform:translateY(-10px);box-shadow:0 10px 30px rgba(0,0,0,.08)}
        .step-number{font-size:3rem;font-weight:700;color:var(--primary-green-light);background-color:var(--primary-green-medium);width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem auto}
        .step-card h3{font-size:1.5rem;color:var(--primary-green-dark);margin-bottom:.5rem}
        .faq-item{border-bottom:1px solid #e0e0e0;padding:1.5rem 0}
        .faq-question{display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-size:1.2rem;font-weight:600;transition: color .3s ease;}
        .faq-question:hover{color:var(--primary-green-medium)}
        .faq-answer{max-height:0;overflow:hidden;transition:max-height .3s ease-out, padding .3s ease-out;color:var(--neutral-medium)}
        .faq-answer p{padding-top:1rem}
        .faq-toggle{font-size:1.5rem;font-weight:bold;transition:transform .3s ease}
        .faq-item.active .faq-toggle{transform:rotate(45deg)}
        #form-section{background-color:var(--neutral-light)}
        .form-container{background-color:white;padding:3rem;border-radius:10px;box-shadow:0 5px 25px rgba(0,0,0,.07);max-width:800px;margin:0 auto;overflow:hidden}
        .quiz-step{display:none;animation:fadeIn .5s ease-in-out}
        .quiz-step.active{display:block}
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        .quiz-question{font-size:1.75rem;font-weight:600;color:var(--primary-green-dark);margin-bottom:2rem;text-align:center}
        .form-group{display:flex;flex-direction:column;margin-bottom:1.5rem}
        .form-group label{font-weight:600;margin-bottom:.5rem;color:var(--primary-green-dark)}
        .form-group input,.form-group select,.form-group textarea{width:100%;padding:.8rem 1rem;border-radius:8px;border:1px solid #ccc;font-family:'Poppins',sans-serif;font-size:1rem;transition:border-color .3s,box-shadow .3s}
        .form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:none;border-color:var(--primary-green-medium);box-shadow:0 0 0 3px rgba(38,166,154,.2)}
        .form-group textarea{min-height:120px;resize:vertical}
        .options-grid,.radio-options{display:flex;flex-direction:column;gap:1rem}
        .checkbox-options label, .options-grid label, .radio-options label{display:flex;align-items:center;gap:.75rem;cursor:pointer;font-weight:500;padding:.8rem 1.5rem;border:1px solid #ccc;border-radius:8px;transition:all .2s ease;text-align:left;position:relative}
        .checkbox-options label:hover,.options-grid label:hover,.radio-options label:hover{background-color:var(--primary-green-light);border-color:var(--primary-green-medium)}
        .checkbox-options input[type=checkbox],.options-grid input[type=radio],.radio-options input[type=radio]{display:none}
        .checkbox-options input[type=checkbox]:checked+span::before,.options-grid input[type=radio]:checked+span::before,.radio-options input[type=radio]:checked+span::before{content:'✔';color:var(--primary-green-medium);margin-right:.5rem;font-weight:600}
        .checkbox-options label.checked,.options-grid label.checked,.radio-options label.checked{border:2px solid var(--primary-green-medium);background-color:var(--primary-green-light);font-weight:600;color:var(--primary-green-dark)}
        .form-group.invalid input,.form-group.invalid select,.form-group.invalid textarea{border:1px solid var(--error-color);background-color:var(--error-background)}
        .form-group.invalid .options-grid, .form-group.invalid .radio-options, .form-group.invalid .checkbox-options{border:1px solid var(--error-color);background-color:var(--error-background);border-radius:8px;padding:1rem}
        .error-message{color:var(--error-color);font-size:.875rem;margin-top:.25rem;display:none}
        .form-group.invalid .error-message{display:block}
        .progress-container{margin-bottom:2rem;position:relative}
        .progress-bar-track{width:100%;height:10px;background-color:#e0e0e0;border-radius:5px;overflow:hidden}
        .progress-bar-fill{width:0%;height:100%;background-color:var(--primary-green-medium);border-radius:5px;transition:width .4s ease}
        .progress-text{text-align:center;margin-top:.5rem;color:var(--neutral-medium);font-weight:500}
        .quiz-navigation{display:flex;justify-content:space-between;margin-top:3rem}
        .quiz-navigation button{font-size:1rem}
        #result-screen{text-align:center}
        #result-screen h3{font-size:2rem;color:var(--primary-green-dark);margin-bottom:1rem}
        #result-screen p{font-size:1.1rem;color:var(--neutral-medium);margin-bottom:2rem}
        #result-screen ul{list-style:none;text-align:left;display:inline-block;margin-bottom:2.5rem}
        #result-screen ul li{font-size:1.1rem;margin-bottom:1rem}
        footer{background-color:var(--primary-green-dark);color:white;padding:3rem 0;text-align:center}
        .footer-content{display:flex;flex-direction:column;align-items:center;gap:1.5rem}
        .footer-links{list-style:none;display:flex;gap:1.5rem}
        .footer-links a{color:white;text-decoration:none;transition:color .3s ease}
        .footer-links a:hover{color:var(--primary-green-medium)}
        @media (max-width:992px){.hero-content{flex-direction:column;text-align:center}.hero-text,.hero-image{max-width:100%}.steps-container{flex-direction:column}}
        @media (max-width:768px){html{font-size:93.75%}nav ul{position:fixed;left:-100%;top:73px;flex-direction:column;background-color:white;width:100%;text-align:center;transition:.3s;gap:0;box-shadow:0 10px 10px rgba(0,0,0,.05)}nav ul.active{left:0}nav li{width:100%}nav a{padding:1.5rem 1rem;display:block;width:100%;border-bottom:1px solid #f0f0f0}.btn-nav{margin:1rem;display:block}nav a:not(.btn)::after{display:none}.hamburger{display:block}.hamburger.active .bar:nth-child(2){opacity:0}.hamburger.active .bar:nth-child(1){transform:translateY(8px) rotate(45deg)}.hamburger.active .bar:nth-child(3){transform:translateY(-8px) rotate(-45deg)}.form-container{padding:2rem}}
    </style>
<script type="importmap">
{
  "imports": {
    "express": "https://aistudiocdn.com/express@^5.1.0",
    "cors": "https://aistudiocdn.com/cors@^2.8.5",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0"
  }
}
</script>
</head>
<body>

    <header id="main-header">
        <div class="container header-content">
            <a href="#" class="logo">Sua<span>Petição</span></a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="#how-it-works">Como funciona</a></li>
                    <li><a href="#faq">Perguntas frequentes</a></li>
                    <li><a href="#form-section" class="btn btn-secondary btn-nav">Criar Petição</a></li>
                </ul>
            </nav>
             <button class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </header>

    <main>
        <section id="hero">
            <div class="container hero-content">
                <div class="hero-text">
                    <h1>Gerador de Petições Iniciais com Inteligência Artificial</h1>
                    <p>Rápido, simples e pronto para protocolar no Juizado. Crie seu documento jurídico em minutos e defenda seus direitos com mais facilidade.</p>
                    <a href="#form-section" class="btn btn-primary">Criar Petição Agora</a>
                </div>
                <div class="hero-image">
                   <svg width="400" height="400" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="var(--primary-green-dark)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14 2V8H20" stroke="var(--primary-green-dark)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 13H8" stroke="var(--primary-green-medium)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M16 17H8" stroke="var(--primary-green-medium)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10 9H8" stroke="var(--primary-green-medium)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12.5 13.5C13.0523 13.5 13.5 13.0523 13.5 12.5C13.5 11.9477 13.0523 11.5 12.5 11.5C11.9477 11.5 11.5 11.9477 11.5 12.5C11.5 13.0523 11.9477 13.5 12.5 13.5Z" fill="var(--primary-green-medium)"/>
                        <path d="M15.5 18.5C16.0523 18.5 16.5 18.0523 16.5 17.5C16.5 16.9477 16.0523 16.5 15.5 16.5C14.9477 16.5 14.5 16.9477 14.5 17.5C14.5 18.0523 14.9477 18.5 15.5 18.5Z" fill="var(--primary-green-medium)"/>
                        <path d="M9.5 8.5C10.0523 8.5 10.5 8.0523 10.5 7.5C10.5 6.94771 10.0523 6.5 9.5 6.5C8.94771 6.5 8.5 6.94771 8.5 7.5C8.5 8.0523 8.94771 8.5 9.5 8.5Z" fill="var(--primary-green-medium)"/>
                   </svg>
                </div>
            </div>
        </section>

        <section id="how-it-works">
            <div class="container">
                <h2 class="section-title">Como Funciona</h2>
                <p class="section-subtitle">Em três passos simples, você transforma seu problema em um documento jurídico pronto para usar.</p>
                <div class="steps-container">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <h3>Responda o Quiz</h3>
                        <p>Nosso assistente virtual fará perguntas rápidas e objetivas para entender todos os detalhes do seu caso.</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <h3>IA Gera o Documento</h3>
                        <p>Nossa Inteligência Artificial analisa suas respostas e redige uma petição inicial completa e personalizada.</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <h3>Baixe e Protocole</h3>
                        <p>Você recebe o documento em PDF, pronto para imprimir, assinar e levar ao Juizado Especial Cível da sua cidade.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="form-section">
            <div class="container">
                <h2 class="section-title">Crie Sua Petição</h2>
                <p class="section-subtitle">Responda algumas perguntas e nossa IA montará o documento para você.</p>
                <div class="form-container">
                    
                    <div id="result-screen" style="display: none;">
                        <h3>Petição Gerada com Sucesso!</h3>
                        <p>Seu documento foi baixado. Siga os próximos passos para protocolar sua ação:</p>
                        <ul>
                            <li>✅ Abra o arquivo 'peticao.pdf' que foi salvo no seu computador.</li>
                            <li>✅ Imprima 3 vias do documento.</li>
                            <li>✅ Junte cópias dos seus documentos pessoais (RG, CPF, Comprovante de Residência).</li>
                            <li>✅ Anexe todas as provas que você mencionou (notas fiscais, protocolos, prints, etc).</li>
                            <li>✅ Leve toda a documentação ao balcão do Juizado Especial Cível (JEC) da sua cidade.</li>
                        </ul>
                        <button type="button" id="restart-quiz-btn" class="btn btn-primary">Começar Novamente</button>
                    </div>

                    <form id="petition-form" novalidate>
                        <div class="progress-container">
                            <div class="progress-bar-track">
                                <div class="progress-bar-fill"></div>
                            </div>
                            <p class="progress-text">Pergunta 1 de N</p>
                        </div>

                        <!-- ETAPA 1: TIPO DE PROBLEMA -->
                        <div class="quiz-step" data-step-id="problem-type">
                            <h3 class="quiz-question">Olá! Para começar, qual destes problemas você enfrentou com a sua conta de energia?</h3>
                            <div class="form-group">
                                <div class="options-grid" id="problem-type-options">
                                    <label>
                                        <input type="radio" name="problem-type" value="corte_indevido" required>
                                        <span>Corte indevido de energia</span>
                                    </label>
                                    <label>
                                        <input type="radio" name="problem-type" value="danos_eletricos" required>
                                        <span>Queda de energia que danificou aparelhos</span>
                                    </label>
                                    <label>
                                        <input type="radio" name="problem-type" value="toi" required>
                                        <span>Recebi uma multa / TOI indevido</span>
                                    </label>
                                    <label>
                                        <input type="radio" name="problem-type" value="recusa_ligacao" required>
                                        <span>Recusaram a ligação de energia nova</span>
                                    </label>
                                     <label>
                                        <input type="radio" name="problem-type" value="cobranca_indevida" required>
                                        <span>Cobrança indevida na conta</span>
                                    </label>
                                </div>
                                <p class="error-message">Por favor, selecione uma opção.</p>
                            </div>
                        </div>

                        <!-- ETAPAS DE DADOS PESSOAIS -->
                        <div class="quiz-step" data-step-id="author-name">
                             <h3 class="quiz-question">Qual é o seu nome completo?</h3>
                             <div class="form-group">
                                <label for="author-name">Nome Completo</label>
                                <input type="text" id="author-name" name="author-name" placeholder="Digite seu nome completo" required>
                                <p class="error-message">Este campo é obrigatório.</p>
                             </div>
                        </div>
                        <div class="quiz-step" data-step-id="author-cpf">
                             <h3 class="quiz-question">Qual é o seu CPF?</h3>
                             <div class="form-group">
                                <label for="author-cpf">CPF</label>
                                <input type="text" id="author-cpf" name="author-cpf" placeholder="000.000.000-00" required>
                                 <p class="error-message">Este campo é obrigatório.</p>
                             </div>
                        </div>
                        <div class="quiz-step" data-step-id="author-address">
                             <h3 class="quiz-question">Qual seu endereço completo?</h3>
                             <div class="form-group">
                                <label for="author-address">Endereço (Rua, Nº, Bairro, CEP, Cidade, Estado)</label>
                                <textarea id="author-address" name="author-address" placeholder="Ex: Rua das Flores, 123, Centro, 40000-000, Salvador, Bahia" required></textarea>
                                 <p class="error-message">Este campo é obrigatório.</p>
                             </div>
                        </div>
                         <div class="quiz-step" data-step-id="author-contact">
                             <h3 class="quiz-question">Qual seu e-mail e telefone para contato?</h3>
                              <div class="form-group">
                                <label for="author-email">E-mail</label>
                                <input type="email" id="author-email" name="author-email" placeholder="seuemail@exemplo.com" required>
                                 <p class="error-message">Digite um e-mail válido.</p>
                             </div>
                             <div class="form-group">
                                <label for="author-phone">Telefone / WhatsApp</label>
                                <input type="tel" id="author-phone" name="author-phone" placeholder="(71) 99999-9999" required>
                                <p class="error-message">Digite um telefone válido.</p>
                             </div>
                        </div>

                        <!-- ETAPA DADOS DA EMPRESA -->
                        <div class="quiz-step" data-step-id="company-info">
                            <h3 class="quiz-question">Qual o nome da empresa de energia que você vai processar?</h3>
                            <div class="form-group">
                                <label for="company-name">Nome da Concessionária</label>
                                <input type="text" id="company-name" name="company-name" placeholder="Ex: Coelba, Light, Enel" required>
                                <p class="error-message">Este campo é obrigatório.</p>
                            </div>
                            <div class="form-group">
                                <label for="company-details">Você tem o CNPJ ou endereço da empresa? (Opcional)</label>
                                <textarea id="company-details" name="company-details" placeholder="Se souber, informe aqui. Se não, pode deixar em branco."></textarea>
                            </div>
                        </div>

                        <!-- BLOCOS ESPECÍFICOS -->
                        <!-- Corte Indevido -->
                        <div class="quiz-step" data-step-id="corte-data">
                            <h3 class="quiz-question">Em que data a sua energia foi cortada?</h3>
                            <div class="form-group">
                                <label for="corte-data-input">Data do corte</label>
                                <input type="date" id="corte-data-input" name="corte-data" required>
                                <p class="error-message">Informe a data.</p>
                            </div>
                        </div>
                        <div class="quiz-step" data-step-id="corte-aviso">
                            <h3 class="quiz-question">A empresa avisou com antecedência que iria cortar a energia?</h3>
                            <div class="form-group">
                                <div class="radio-options">
                                    <label><input type="radio" name="corte-aviso" value="sim" required><span>Sim, avisou</span></label>
                                    <label><input type="radio" name="corte-aviso" value="nao" required><span>Não, não recebi nenhum aviso</span></label>
                                </div>
                                 <p class="error-message">Selecione uma opção.</p>
                            </div>
                        </div>
                        <div class="quiz-step" data-step-id="corte-divida">
                             <h3 class="quiz-question">Você tinha alguma conta em atraso no momento do corte?</h3>
                            <div class="form-group">
                                <div class="radio-options">
                                    <label><input type="radio" name="corte-divida" value="nao" required><span>Não, todas as contas estavam pagas</span></label>
                                    <label><input type="radio" name="corte-divida" value="sim_indevida" required><span>Sim, mas era uma cobrança indevida que eu estava questionando</span></label>
                                    <label><input type="radio" name="corte-divida" value="nao_concordo" required><span>A empresa alega que sim, mas não reconheço a dívida</span></label>
                                </div>
                                 <p class="error-message">Selecione uma opção.</p>
                            </div>
                        </div>
                        <div class="quiz-step" data-step-id="corte-religacao">
                             <h3 class="quiz-question">A energia já foi religada?</h3>
                             <div class="form-group">
                                <label for="corte-religacao-data">Se sim, em que data?</label>
                                <input type="date" id="corte-religacao-data" name="corte-religacao-data">
                                <div class="radio-options" style="margin-top: 1rem;">
                                    <label><input type="radio" name="corte-religada" value="nao"><span>Ainda não foi religada</span></label>
                                </div>
                             </div>
                        </div>

                        <!-- Danos Elétricos -->
                         <div class="quiz-step" data-step-id="oscilacao-data">
                             <h3 class="quiz-question">Qual foi a data aproximada da queda de energia que danificou seus aparelhos?</h3>
                             <div class="form-group">
                                 <label for="oscilacao-data-input">Data do ocorrido</label>
                                 <input type="date" id="oscilacao-data-input" name="oscilacao-data" required>
                                 <p class="error-message">Informe a data.</p>
                             </div>
                        </div>
                        <div class="quiz-step" data-step-id="oscilacao-equipamentos">
                             <h3 class="quiz-question">Quais equipamentos foram danificados?</h3>
                             <div class="form-group">
                                 <label for="oscilacao-equipamentos-input">Descreva os aparelhos (Ex: TV Samsung 50", Geladeira Brastemp, etc.)</label>
                                 <textarea id="oscilacao-equipamentos-input" name="oscilacao-equipamentos" required></textarea>
                                 <p class="error-message">Descreva os equipamentos.</p>
                             </div>
                        </div>
                        <div class="quiz-step" data-step-id="oscilacao-comunicacao">
                             <h3 class="quiz-question">Você chegou a abrir uma reclamação na empresa sobre os danos?</h3>
                             <div class="form-group">
                                 <div class="radio-options">
                                    <label><input type="radio" name="oscilacao-comunicacao" value="sim" required><span>Sim</span></label>
                                    <label><input type="radio" name="oscilacao-comunicacao" value="nao" required><span>Não</span></label>
                                 </div>
                                 <p class="error-message">Selecione uma opção.</p>
                             </div>
                             <div class="form-group" id="oscilacao-protocolo-group" style="display: none; margin-top: 1rem;">
                                <label for="oscilacao-protocolo">Qual o número do protocolo?</label>
                                <input type="text" id="oscilacao-protocolo" name="oscilacao-protocolo">
                             </div>
                        </div>

                        <!-- TOI -->
                        <div class="quiz-step" data-step-id="toi-numero">
                            <h3 class="quiz-question">Qual o número do TOI (Termo de Ocorrência e Inspeção) que você recebeu?</h3>
                            <div class="form-group">
                                <label for="toi-numero-input">Número do TOI (se houver)</label>
                                <input type="text" id="toi-numero-input" name="toi-numero">
                            </div>
                        </div>
                        <div class="quiz-step" data-step-id="toi-data">
                            <h3 class="quiz-question">Qual foi a data da vistoria que gerou a multa/TOI?</h3>
                            <div class="form-group">
                                <label for="toi-data-input">Data da vistoria</label>
                                <input type="date" id="toi-data-input" name="toi-data" required>
                                <p class="error-message">Informe a data.</p>
                            </div>
                        </div>
                        <div class="quiz-step" data-step-id="toi-presente">
                             <h3 class="quiz-question">Você estava presente e acompanhou a vistoria?</h3>
                             <div class="form-group">
                                 <div class="radio-options">
                                    <label><input type="radio" name="toi-presente" value="sim" required><span>Sim, eu acompanhei</span></label>
                                    <label><input type="radio" name="toi-presente" value="nao" required><span>Não, a vistoria foi feita sem minha presença</span></label>
                                 </div>
                                 <p class="error-message">Selecione uma opção.</p>
                             </div>
                        </div>
                         <div class="quiz-step" data-step-id="toi-cobranca">
                             <h3 class="quiz-question">A empresa já incluiu a cobrança na sua conta ou ameaçou cortar sua energia?</h3>
                             <div class="form-group">
                                 <label for="toi-cobranca-detalhes">Descreva a situação</label>
                                 <textarea id="toi-cobranca-detalhes" name="toi-cobranca-detalhes" placeholder="Ex: A cobrança veio na fatura do mês X. Recebi uma carta de aviso de corte." required></textarea>
                                 <p class="error-message">Este campo é obrigatório.</p>
                             </div>
                        </div>
                        
                        <!-- Recusa de Ligação -->
                        <div class="quiz-step" data-step-id="recusa-data-solicitacao">
                            <h3 class="quiz-question">Em que data você pediu a nova ligação de energia?</h3>
                            <div class="form-group">
                                <label for="recusa-data-input">Data da solicitação</label>
                                <input type="date" id="recusa-data-input" name="recusa-data-solicitacao" required>
                                <p class="error-message">Informe a data.</p>
                            </div>
                        </div>
                        <div class="quiz-step" data-step-id="recusa-motivo">
                             <h3 class="quiz-question">A empresa informou o motivo para recusar a ligação?</h3>
                             <div class="form-group">
                                 <label for="recusa-motivo-input">Qual foi o motivo alegado?</label>
                                 <textarea id="recusa-motivo-input" name="recusa-motivo" placeholder="Ex: Disseram que havia um débito antigo no meu nome. Disseram que faltava um documento." required></textarea>
                                 <p class="error-message">Este campo é obrigatório.</p>
                             </div>
                        </div>
                        <div class="quiz-step" data-step-id="recusa-protocolo">
                             <h3 class="quiz-question">Você tem o número do protocolo de atendimento?</h3>
                             <div class="form-group">
                                <label for="recusa-protocolo-input">Protocolo (se tiver)</label>
                                <input type="text" id="recusa-protocolo-input" name="recusa-protocolo">
                             </div>
                        </div>
                         <div class="quiz-step" data-step-id="recusa-moradores">
                             <h3 class="quiz-question">Há pessoas morando no imóvel que está sem energia?</h3>
                             <div class="form-group">
                                 <div class="radio-options">
                                    <label><input type="radio" name="recusa-moradores" value="sim" required><span>Sim</span></label>
                                    <label><input type="radio" name="recusa-moradores" value="nao" required><span>Não, o imóvel está vazio por enquanto</span></label>
                                 </div>
                                 <p class="error-message">Selecione uma opção.</p>
                             </div>
                        </div>
                        
                        <!-- Cobrança Indevida -->
                        <div class="quiz-step" data-step-id="cobranca-tipo">
                            <h3 class="quiz-question">Que tipo de cobrança indevida você recebeu?</h3>
                            <div class="form-group">
                                <div class="radio-options">
                                    <label><input type="radio" name="cobranca-tipo" value="acima_media" required><span>Conta com valor muito acima da média</span></label>
                                    <label><input type="radio" name="cobranca-tipo" value="debito_inexistente" required><span>Cobrança de um débito que não existe ou já foi pago</span></label>
                                    <label><input type="radio" name="cobranca-tipo" value="servico_nao_solicitado" required><span>Cobrança de um serviço não solicitado (ex: seguro)</span></label>
                                </div>
                                <p class="error-message">Selecione uma opção.</p>
                            </div>
                        </div>
                        <div class="quiz-step" data-step-id="cobranca-reclamacao">
                             <h3 class="quiz-question">Você já tentou reclamar com a empresa sobre essa cobrança?</h3>
                             <div class="form-group">
                                 <div class="radio-options">
                                    <label><input type="radio" name="cobranca-reclamacao" value="sim" required><span>Sim</span></label>
                                    <label><input type="radio" name="cobranca-reclamacao" value="nao" required><span>Não</span></label>
                                 </div>
                                 <p class="error-message">Selecione uma opção.</p>
                             </div>
                              <div class="form-group" id="cobranca-protocolo-group" style="display: none; margin-top: 1rem;">
                                <label for="cobranca-protocolo">Quais os números de protocolo?</label>
                                <textarea id="cobranca-protocolo" name="cobranca-protocolo"></textarea>
                             </div>
                        </div>
                        <div class="quiz-step" data-step-id="cobranca-negativacao">
                             <h3 class="quiz-question">Por causa dessa cobrança, seu nome foi negativado (SPC/Serasa)?</h3>
                             <div class="form-group">
                                 <div class="radio-options">
                                    <label><input type="radio" name="cobranca-negativacao" value="sim" required><span>Sim</span></label>
                                    <label><input type="radio" name="cobranca-negativacao" value="nao" required><span>Não</span></label>
                                    <label><input type="radio" name="cobranca-negativacao" value="nao_sei" required><span>Não sei informar</span></label>
                                 </div>
                                 <p class="error-message">Selecione uma opção.</p>
                             </div>
                        </div>

                        <!-- ETAPAS FINAIS -->
                        <div class="quiz-step" data-step-id="provas-gerais">
                            <h3 class="quiz-question">Quais provas você tem para anexar ao processo?</h3>
                            <p class="section-subtitle" style="margin-bottom: 2rem; font-size: 1rem;">Selecione tudo o que você tiver. Isso fortalece muito o seu caso.</p>
                            <div class="form-group">
                                <div class="checkbox-options">
                                    <label><input type="checkbox" name="provas" value="contas"><span>Contas de energia (as recentes e, se for o caso, a que originou o problema)</span></label>
                                    <label><input type="checkbox" name="provas" value="protocolos"><span>Protocolos de atendimento (anote todos que tiver)</span></label>
                                    <label><input type="checkbox" name="provas" value="fotos_videos"><span>Fotos ou vídeos (ex: alimentos estragados, aparelho danificado, etc.)</span></label>
                                    <label><input type="checkbox" name="provas" value="prints"><span>Prints de tela (do aplicativo da empresa, de e-mails, etc.)</span></label>
                                    <label><input type="checkbox" name="provas" value="notas_fiscais"><span>Notas fiscais, orçamentos ou laudos técnicos (essencial para danos em aparelhos)</span></label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-step" data-step-id="valores-pedidos">
                            <h3 class="quiz-question">Vamos falar sobre os valores da indenização.</h3>
                             <div class="form-group">
                                <label>Você quer pedir indenização por danos morais?</label>
                                <div class="radio-options">
                                    <label><input type="radio" name="dano-moral-pergunta" value="sim" required><span>Sim, pelo transtorno e desrespeito.</span></label>
                                    <label><input type="radio" name="dano-moral-pergunta" value="nao" required><span>Não, quero resolver apenas a questão material.</span></label>
                                </div>
                                <p class="error-message">Selecione uma opção.</p>
                            </div>
                             <div class="form-group" id="dano-moral-valor-group" style="display: none;">
                                <label for="moral-value">Qual valor você sugere para danos morais? (Opcional, o juiz decidirá o valor final)</label>
                                <input type="text" id="moral-value" name="moral-value" placeholder="R$ 5.000,00">
                            </div>
                             <div class="form-group">
                                <label for="material-value">Qual o valor total do seu prejuízo material? (Se não houver, deixe em branco ou 0)</label>
                                <input type="text" id="material-value" name="material-value" placeholder="R$ 0,00">
                            </div>
                        </div>

                        <div class="quiz-step" data-step-id="info-finais">
                            <h3 class="quiz-question">Estamos quase no fim! Em qual cidade e estado você vai entrar com a ação?</h3>
                            <div class="form-group">
                                <label for="action-city-state">Cidade e Estado</label>
                                <input type="text" id="action-city-state" name="action-city-state" placeholder="Ex: Salvador, Bahia" required>
                                <p class="error-message">Este campo é obrigatório.</p>
                            </div>
                            <div class="form-group">
                                <label>Deseja pedir uma decisão urgente (liminar)?</label>
                                <p style="font-size: 0.9rem; color: var(--neutral-medium); margin-top: -0.5rem; margin-bottom: 0.5rem;">Ex: religação imediata da energia, suspensão da cobrança do TOI, etc.</p>
                                <div class="radio-options">
                                    <label><input type="radio" name="urgent-decision" value="sim" required><span>Sim, preciso de uma decisão rápida</span></label>
                                    <label><input type="radio" name="urgent-decision" value="nao" required><span>Não, posso aguardar</span></label>
                                </div>
                                <p class="error-message">Selecione uma opção.</p>
                            </div>
                        </div>

                        <div class="quiz-navigation">
                            <button type="button" id="prevBtn" class="btn btn-secondary">Anterior</button>
                            <button type="button" id="nextBtn" class="btn btn-primary">Próximo</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section id="faq">
            <div class="container">
                 <h2 class="section-title">Perguntas Frequentes</h2>
                 <div class="faq-item">
                     <div class="faq-question">
                         <span>Preciso de advogado para usar a petição?</span>
                         <span class="faq-toggle">+</span>
                     </div>
                     <div class="faq-answer">
                         <p>Não. Nossas petições são criadas para o Juizado Especial Cível (JEC), onde, para causas de até 20 salários mínimos, você não precisa de um advogado.</p>
                     </div>
                 </div>
                 <div class="faq-item">
                     <div class="faq-question">
                         <span>Qual o limite de valor da causa no JEC?</span>
                         <span class="faq-toggle">+</span>
                     </div>
                     <div class="faq-answer">
                         <p>O limite é de 40 salários mínimos. Contudo, para ingressar sem advogado, o limite é de 20 salários mínimos. Nossa ferramenta foca em casos dentro deste limite.</p>
                     </div>
                 </div>
                <div class="faq-item">
                     <div class="faq-question">
                         <span>Quanto custa o serviço?</span>
                         <span class="faq-toggle">+</span>
                     </div>
                     <div class="faq-answer">
                         <p>A geração da sua petição inicial através do nosso quiz é totalmente gratuita.</p>
                     </div>
                 </div>
                 <div class="faq-item">
                     <div class="faq-question">
                         <span>Meus dados estão seguros?</span>
                         <span class="faq-toggle">+</span>
                     </div>
                     <div class="faq-answer">
                         <p>Sim. Nós não armazenamos nenhuma informação pessoal que você insere no formulário. Todos os dados são usados apenas no momento da geração do documento e depois descartados.</p>
                     </div>
                 </div>
                 <div class="faq-item">
                     <div class="faq-question">
                         <span>Gerei a petição. E agora?</span>
                         <span class="faq-toggle">+</span>
                     </div>
                     <div class="faq-answer">
                         <p>Após baixar o PDF, você deve imprimi-lo, assiná-lo e juntar cópias dos seus documentos e de todas as provas que tiver. Depois, basta levar tudo ao balcão do Juizado Especial Cível da sua cidade para dar entrada no processo.</p>
                     </div>
                 </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container footer-content">
            <a href="#" class="logo">Sua<span>Petição</span></a>
            <p>&copy; 2024 SuaPetição. Todos os direitos reservados. Este site não presta assessoria jurídica.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // !!! IMPORTANTE: Cole a URL do seu backend do Render aqui !!!
            const API_URL = "https://SEU-BACKEND.onrender.com/api/generate-petition";

            // Header scroll effect
            const header = document.getElementById('main-header');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) { header.classList.add('scrolled'); } 
                else { header.classList.remove('scrolled'); }
            });

            // Hamburger menu
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });
            
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
                    if (navMenu.classList.contains('active')) {
                        hamburger.classList.remove('active');
                        navMenu.classList.remove('active');
                    }
                });
            });

            // FAQ Accordion
            const faqItems = document.querySelectorAll('.faq-item');
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                question.addEventListener('click', () => {
                    const currentlyActive = document.querySelector('.faq-item.active');
                    if (currentlyActive && currentlyActive !== item) {
                        currentlyActive.classList.remove('active');
                        currentlyActive.querySelector('.faq-answer').style.maxHeight = null;
                    }
                    
                    item.classList.toggle('active');
                    const answer = item.querySelector('.faq-answer');
                    if (item.classList.contains('active')) {
                        answer.style.maxHeight = answer.scrollHeight + "px";
                    } else {
                        answer.style.maxHeight = null;
                    }
                });
            });

            // --- QUIZ LOGIC ---
            const form = document.getElementById('petition-form');
            const resultScreen = document.getElementById('result-screen');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const progressBarFill = document.querySelector('.progress-bar-fill');
            const progressText = document.querySelector('.progress-text');
            const allSteps = Array.from(document.querySelectorAll('.quiz-step'));
            
            const stepBlocks = {
                corte_indevido: ['corte-data', 'corte-aviso', 'corte-divida', 'corte-religacao'],
                danos_eletricos: ['oscilacao-data', 'oscilacao-equipamentos', 'oscilacao-comunicacao'],
                toi: ['toi-numero', 'toi-data', 'toi-presente', 'toi-cobranca'],
                recusa_ligacao: ['recusa-data-solicitacao', 'recusa-motivo', 'recusa-protocolo', 'recusa-moradores'],
                cobranca_indevida: ['cobranca-tipo', 'cobranca-reclamacao', 'cobranca-negativacao']
            };

            let quizFlow = [];
            let currentStepIndex = 0;

            function startQuiz() {
                form.style.display = 'block';
                allSteps.forEach(s => s.classList.remove('active'));

                quizFlow = [
                    'problem-type', 'author-name', 'author-cpf', 'author-address', 'author-contact',
                    'company-info', 'provas-gerais', 'valores-pedidos', 'info-finais'
                ];
                currentStepIndex = 0;
                
                const firstStepElement = allSteps.find(s => s.dataset.stepId === quizFlow[0]);
                if (firstStepElement) {
                    firstStepElement.classList.add('active');
                }
                updateProgress();
                updateNavigationButtons();
            }

            function showStep(index) {
                allSteps.forEach(step => step.classList.remove('active'));
                const stepIdToShow = quizFlow[index];
                const stepElement = allSteps.find(s => s.dataset.stepId === stepIdToShow);
                if (stepElement) {
                    stepElement.classList.add('active');
                    const firstInput = stepElement.querySelector('input, select, textarea');
                    if (firstInput) firstInput.focus();
                }
                updateProgress();
                updateNavigationButtons();
            }
            
            function updateProgress() {
                const totalSteps = quizFlow.length > 0 ? quizFlow.length : 1;
                const current = currentStepIndex + 1;
                const progressPercentage = Math.max(0, ((currentStepIndex) / (totalSteps - 1))) * 100;
                progressBarFill.style.width = `${progressPercentage}%`;
                progressText.textContent = `Pergunta ${current} de ${totalSteps}`;
            }

            function updateNavigationButtons() {
                prevBtn.style.visibility = currentStepIndex === 0 ? 'hidden' : 'visible';
                nextBtn.textContent = currentStepIndex === quizFlow.length - 1 ? 'Gerar Petição' : 'Próximo';
            }
            
            function navigate(direction) {
                if (direction === 1) { // forward
                    if (!validateCurrentStep()) return;
                    
                    const oldFlowLength = quizFlow.length;
                    updateQuizFlow();
                    
                    if (currentStepIndex === quizFlow.length - 1) {
                         submitForm();
                    } else {
                        currentStepIndex++;
                        showStep(currentStepIndex);
                    }

                } else { // back
                    if (currentStepIndex > 0) {
                        currentStepIndex--;
                        updateQuizFlow(); 
                        showStep(currentStepIndex);
                    }
                }
            }

            function validateCurrentStep() {
                let isValid = true;
                const currentStepId = quizFlow[currentStepIndex];
                const currentStepElement = allSteps.find(s => s.dataset.stepId === currentStepId);

                currentStepElement.querySelectorAll('[required]').forEach(input => {
                    const formGroup = input.closest('.form-group');
                    let ok = true;

                    if (input.type === 'radio') {
                        const checked = currentStepElement.querySelector(`input[name="${input.name}"]:checked`);
                        if (!checked) ok = false;
                    } else if (input.value.trim() === '') {
                        ok = false;
                    }

                    if (!ok) {
                        isValid = false;
                        formGroup?.classList.add('invalid');
                    } else {
                        formGroup?.classList.remove('invalid');
                    }
                });
                return isValid;
            }

            function updateQuizFlow() {
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());

                const baseFlow = [
                    'problem-type', 'author-name', 'author-cpf', 'author-address', 'author-contact',
                    'company-info', 'provas-gerais', 'valores-pedidos', 'info-finais'
                ];

                const problemType = data['problem-type'];
                const specificSteps = problemType ? stepBlocks[problemType] : [];
                
                const companyInfoIndex = baseFlow.indexOf('company-info');
                
                // Reconstroi o quizFlow do zero para garantir a ordem correta
                quizFlow = [
                    ...baseFlow.slice(0, companyInfoIndex + 1),
                    ...(specificSteps || []),
                    ...baseFlow.slice(companyInfoIndex + 1)
                ];
                 
                document.getElementById('oscilacao-protocolo-group').style.display = data['oscilacao-comunicacao'] === 'sim' ? 'block' : 'none';
                document.getElementById('cobranca-protocolo-group').style.display = data['cobranca-reclamacao'] === 'sim' ? 'block' : 'none';
                document.getElementById('dano-moral-valor-group').style.display = data['dano-moral-pergunta'] === 'sim' ? 'block' : 'none';
            }
            
            async function submitForm() {
                nextBtn.textContent = 'Gerando...';
                nextBtn.disabled = true;

                const formData = new FormData(form);
                const data = {};
                formData.forEach((value, key) => {
                    const existing = data[key];
                    if (existing) {
                        if (!Array.isArray(existing)) { data[key] = [existing]; }
                        data[key].push(value);
                    } else {
                        data[key] = value;
                    }
                });

                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data),
                    });

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(`Erro no servidor. Verifique o log do seu backend no Render para mais detalhes.`);
                    }

                    const result = await response.json();
                    const petitionText = result.text || '';

                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });

                    const margin = 20;
                    const maxWidth = doc.internal.pageSize.width - margin * 2;
                    
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(12);
                    doc.setLineHeightFactor(1.5);

                    const lines = doc.splitTextToSize(petitionText, maxWidth);
                    let cursorY = margin;
                    
                    lines.forEach(line => {
                         // Adiciona negrito para os títulos das seções
                        if (line.startsWith('**') && line.endsWith('**')) {
                            doc.setFont('helvetica', 'bold');
                            line = line.substring(2, line.length - 2);
                        }
                        
                        if (cursorY > doc.internal.pageSize.height - margin) {
                            doc.addPage();
                            cursorY = margin;
                        }
                        doc.text(line, margin, cursorY);
                        cursorY += 7; // Incremento de linha
                        
                        doc.setFont('helvetica', 'normal'); // Reseta para normal
                    });
                    
                    doc.save('peticao.pdf');
                    
                    form.style.display = 'none';
                    resultScreen.style.display = 'block';

                } catch (error) {
                    console.error("Falha ao gerar petição:", error);
                    alert("Ocorreu um erro ao gerar a petição: " + error.message);
                } finally {
                    nextBtn.textContent = 'Gerar Petição';
                    nextBtn.disabled = false;
                }
            }
            
            form.querySelectorAll('input[type=radio], input[type=checkbox]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    const name = e.target.name;
                    document.querySelectorAll(`input[name="${name}"]`).forEach(el => {
                        el.closest('label').classList.remove('checked');
                    });
                    if (e.target.checked) {
                        e.target.closest('label').classList.add('checked');
                    }
                });
            });

            form.querySelectorAll('input, select, textarea').forEach(input => {
                const eventType = (input.tagName === 'SELECT' || input.type === 'radio' || input.type === 'checkbox') ? 'change' : 'input';
                input.addEventListener(eventType, (e) => {
                    e.target.closest('.form-group')?.classList.remove('invalid');
                });
            });
            
            nextBtn.addEventListener('click', () => navigate(1));
            prevBtn.addEventListener('click', () => navigate(-1));
            
            document.getElementById('restart-quiz-btn').addEventListener('click', () => {
                resultScreen.style.display = 'none';
                form.reset();
                document.querySelectorAll('.checked').forEach(el => el.classList.remove('checked'));
                startQuiz();
            });

            startQuiz();
        });
    </script>
</body>
</html>o icone esta desalinhado, corrija
